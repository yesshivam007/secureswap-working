<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureSwap - Trustworthy P2P Transactions</title>
    <link href="css/output.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="icon" href="images/favicon.png" type="image/png">
    <style>
        body { overflow-x: hidden; } /* Prevent horizontal scrollbar from AOS */
        html { scroll-behavior: smooth; }
        /* Ensure header elements align nicely */
        #user-info-header, #auth-links { align-items: center; }
        /* Ensure hidden elements are truly hidden */
        .truly-hidden { display: none !important; }
    </style>
</head>
<body class="bg-neutral-lightest">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div>
                <a href="/" class="text-2xl font-bold text-primary-dark">SecureSwap</a>
            </div>

            <div class="flex items-center space-x-4 md:space-x-6">

                <div id="auth-links" class="hidden md:flex items-center space-x-6">
                     <a href="login.html" class="text-neutral hover:text-primary transition duration-200">Login</a>
                     <a href="signup.html" class="bg-primary text-white px-4 py-2 rounded-md hover:bg-primary-dark transition duration-300 text-sm">Sign Up</a>
                 </div>

                 <div id="user-info-header" class="hidden items-center space-x-4">
                     <a href="profile.html" class="flex items-center text-neutral hover:text-primary transition duration-200" title="View Profile">
                         <svg class="w-5 h-5 mr-1 inline-block text-neutral-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                         <span id="user-name-header" class="text-sm font-medium text-neutral-dark">[User]</span>
                     </a>
                     <button id="logout-button-header" class="bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600 transition duration-300 text-xs">
                         Logout
                     </button>
                 </div>

                 <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-neutral-dark focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                 </div>
            </div>
        </nav>

        <div id="mobile-menu" class="hidden md:hidden bg-white py-2">
             <a href="#process" class="block px-6 py-2 text-neutral hover:bg-neutral-light transition duration-200">How it Works</a>
             <a href="#why-us" class="block px-6 py-2 text-neutral hover:bg-neutral-light transition duration-200">Why SecureSwap</a>
             <a href="#faq" class="block px-6 py-2 text-neutral hover:bg-neutral-light transition duration-200">FAQ</a>
             <div id="mobile-auth-links">
                 <a href="login.html" class="block px-6 py-2 text-neutral hover:bg-neutral-light transition duration-200">Login</a>
                 <a href="signup.html" class="block px-6 py-2 text-primary hover:bg-neutral-light transition duration-200">Sign Up</a>
             </div>
             <div id="mobile-user-info" class="hidden">
                 <a href="profile.html" class="block px-6 py-2 text-neutral hover:bg-neutral-light transition duration-200">
                     <span id="mobile-user-name">[User]</span> Profile
                 </a>
                 <button id="mobile-logout-button" class="block w-full text-left px-6 py-2 text-red-600 hover:bg-red-50 transition duration-200">Logout</button>
             </div>
        </div>
    </header>

    <main>
        <section class="bg-white py-20 md:py-32 overflow-hidden">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-bold text-neutral-darkest mb-4 leading-tight" data-aos="fade-down">
                    Making the Internet a <span class="text-primary">Trustworthy</span> Marketplace
                </h1>
                <p class="text-lg md:text-xl text-neutral mb-8 max-w-3xl mx-auto" data-aos="fade-up" data-aos-delay="100">
                    SecureSwap ensures both parties complete their side of the deal‚Äîno scams, no chargebacks, just secure P2P transactions.
                </p>
                <div data-aos="fade-up" data-aos-delay="200">
                    <a id="create-deal-link" href="signup.html" class="bg-primary text-white px-8 py-3 rounded-md text-lg font-semibold hover:bg-primary-dark transition duration-300 mr-4 inline-block transform hover:scale-105">Create a Secure Deal</a>
                </div>
                 <div class="mt-16" data-aos="zoom-in" data-aos-delay="300">
                    <img src="images/hero-illustration.svg" alt="Secure P2P Transaction Illustration" class="mx-auto max-w-lg" onerror="this.onerror=null; this.src='https://placehold.co/600x400/DBEAFE/3B82F6?text=Hero+Illustration';">
                </div>
            </div>
        </section>

        <section class="py-16 md:py-24 overflow-hidden">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div data-aos="fade-right">
                        <img src="images/problem-illustration.svg" alt="Risky P2P Transaction" class="rounded-lg shadow-md mb-8 md:mb-0 mx-auto max-w-md" onerror="this.onerror=null; this.src='https://placehold.co/500x350/FEF3C7/D97706?text=Problem';">
                    </div>
                    <div data-aos="fade-left">
                        <h2 class="text-3xl md:text-4xl font-bold text-neutral-darkest mb-4">The Problem with P2P Deals</h2>
                        <p class="text-lg text-neutral mb-6"> P2P transactions are risky. You send money first, the other party disappears. You ship an item, and payment never arrives. Scams are everywhere. </p>
                        <h3 class="text-2xl md:text-3xl font-bold text-secondary-dark mb-3">The SecureSwap Solution</h3>
                        <p class="text-lg text-neutral"> SecureSwap holds the payment in escrow until both parties fulfill their promises. No fraud. No disputes. Just safe transactions. </p>
                         <img src="images/solution-illustration.svg" alt="Secure Escrow Solution" class="rounded-lg mt-6 mx-auto max-w-xs" onerror="this.onerror=null; this.src='https://placehold.co/400x300/D1FAE5/059669?text=Solution';">
                    </div>
                </div>
            </div>
        </section>

        <section id="process" class="bg-white py-16 md:py-24 overflow-hidden">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-neutral-darkest mb-12" data-aos="fade-up">Simple & Secure Process</h2>
                <div class="grid md:grid-cols-3 gap-8 md:gap-12">
                    <div class="text-center p-4 transition duration-300 ease-in-out transform hover:-translate-y-1 hover:shadow-lg rounded-lg" data-aos="fade-up" data-aos-delay="100">
                        <div class="bg-primary-light w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-primary-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M15 8a3 3 0 10-6 0M12 14a3 3 0 010-6m0 6H9m3 0h3m-3-6a3 3 0 00-3 3m6 0a3 3 0 00-3-3m-3 3a3 3 0 013-3"></path></svg>
                         </div>
                        <h3 class="text-xl font-semibold text-neutral-darkest mb-2">1. Secure the Payment</h3>
                        <p class="text-neutral">Buyer deposits money into SecureSwap‚Äôs secure escrow.</p>
                    </div>
                    <div class="text-center p-4 transition duration-300 ease-in-out transform hover:-translate-y-1 hover:shadow-lg rounded-lg" data-aos="fade-up" data-aos-delay="200">
                        <div class="bg-primary-light w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-primary-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16.005l-4-4m0 0l4-4m-4 4h16"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-neutral-darkest mb-2">2. Complete the Exchange</h3>
                        <p class="text-neutral">Seller delivers the item or service as agreed.</p>
                    </div>
                    <div class="text-center p-4 transition duration-300 ease-in-out transform hover:-translate-y-1 hover:shadow-lg rounded-lg" data-aos="fade-up" data-aos-delay="300">
                        <div class="bg-primary-light w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-primary-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c1.104 0 2 .896 2 2s-.896 2-2 2-2-.896-2-2 .896-2 2-2zm0 10c-1.104 0-2-.896-2-2s.896-2 2-2 2 .896 2 2-.896 2-2 2zm-7-5a1 1 0 110-2 1 1 0 010 2zm14 0a1 1 0 110-2 1 1 0 010 2z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-neutral-darkest mb-2">3. Release the Funds</h3>
                        <p class="text-neutral">Once the buyer confirms, SecureSwap releases payment to the seller.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-16 md:py-24 overflow-hidden">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-neutral-darkest mb-4" data-aos="fade-up">Who is SecureSwap For?</h2>
                <p class="text-lg text-neutral mb-12 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">Anyone involved in a Peer-to-Peer transaction anywhere in India who wants security and peace of mind.</p>
                <img src="images/target-users-main.svg" alt="Diverse P2P Transactions" class="mx-auto mb-12 max-w-lg" data-aos="zoom-in" data-aos-delay="200" onerror="this.onerror=null; this.src='https://placehold.co/600x300/E0E7FF/4338CA?text=All+P2P+Users';">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-8">
                    <div class="text-center p-4 bg-white rounded-lg shadow-sm transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md" data-aos="fade-up" data-aos-delay="300"><span class="text-3xl">üõí</span><p class="mt-2 font-medium text-neutral-dark">Physical Goods</p></div>
                    <div class="text-center p-4 bg-white rounded-lg shadow-sm transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md" data-aos="fade-up" data-aos-delay="350"><span class="text-3xl">üíª</span><p class="mt-2 font-medium text-neutral-dark">Digital Vouchers</p></div>
                    <div class="text-center p-4 bg-white rounded-lg shadow-sm transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md" data-aos="fade-up" data-aos-delay="400"><span class="text-3xl">üéüÔ∏è</span><p class="mt-2 font-medium text-neutral-dark">Event Tickets</p></div>
                    <div class="text-center p-4 bg-white rounded-lg shadow-sm transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md" data-aos="fade-up" data-aos-delay="450"><span class="text-3xl">üéÅ</span><p class="mt-2 font-medium text-neutral-dark">Gift Cards</p></div>
                    <div class="text-center p-4 bg-white rounded-lg shadow-sm transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md" data-aos="fade-up" data-aos-delay="500"><span class="text-3xl">üéÆ</span><p class="mt-2 font-medium text-neutral-dark">In-Game Items</p></div>
                    <div class="text-center p-4 bg-white rounded-lg shadow-sm transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md" data-aos="fade-up" data-aos-delay="550"><span class="text-3xl">üëü</span><p class="mt-2 font-medium text-neutral-dark">Sneaker Reselling</p></div>
                    <div class="text-center p-4 bg-white rounded-lg shadow-sm transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md" data-aos="fade-up" data-aos-delay="600"><span class="text-3xl">üì¶</span><p class="mt-2 font-medium text-neutral-dark">General Resellers</p></div>
                    <div class="text-center p-4 bg-white rounded-lg shadow-sm transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-md" data-aos="fade-up" data-aos-delay="650"><span class="text-3xl">üë©‚Äçüíª</span><p class="mt-2 font-medium text-neutral-dark">Freelancers</p></div>
                </div>
            </div>
        </section>

        <section id="why-us" class="bg-primary-dark text-white py-16 md:py-24 overflow-hidden">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-12" data-aos="fade-up">Trust & Safety First</h2>
                <div class="grid md:grid-cols-3 gap-8 md:gap-12">
                    <div class="text-center" data-aos="fade-up" data-aos-delay="100"> <div class="bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 transition duration-300 transform hover:scale-110"> <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> </div> <h3 class="text-xl font-semibold mb-2">Funds Held in Escrow</h3> <p class="opacity-80">Money is only released when the deal is complete.</p> </div>
                    <div class="text-center" data-aos="fade-up" data-aos-delay="200"> <div class="bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 transition duration-300 transform hover:scale-110"> <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> </div> <h3 class="text-xl font-semibold mb-2">Verified Parties (Soon!)</h3> <p class="opacity-80">Optional verification steps help reduce fraud.</p> </div>
                    <div class="text-center" data-aos="fade-up" data-aos-delay="300"> <div class="bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 transition duration-300 transform hover:scale-110"> <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5h-4m4 0l-2-2m0 2l2-2"></path></svg> </div> <h3 class="text-xl font-semibold mb-2">Clear Refund Process</h3> <p class="opacity-80">Our policies ensure fairness if things go wrong.</p> </div>
                </div>
            </div>
        </section>

        <section class="bg-white py-16 md:py-24 overflow-hidden">
             <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-neutral-darkest mb-12" data-aos="fade-up">Trusted by Users</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="bg-neutral-light p-6 rounded-lg shadow-sm text-left transition duration-300 ease-in-out transform hover:shadow-xl hover:-translate-y-1" data-aos="fade-up" data-aos-delay="100"> <p class="text-neutral mb-4">"Finally sold my collectible safely! SecureSwap made the process smooth..."</p> <p class="font-semibold text-neutral-dark">- Alex R.</p> </div>
                    <div class="bg-neutral-light p-6 rounded-lg shadow-sm text-left transition duration-300 ease-in-out transform hover:shadow-xl hover:-translate-y-1" data-aos="fade-up" data-aos-delay="200"> <p class="text-neutral mb-4">"Was hesitant buying tickets online... SecureSwap's escrow gave me confidence."</p> <p class="font-semibold text-neutral-dark">- Priya S.</p> </div>
                    <div class="bg-neutral-light p-6 rounded-lg shadow-sm text-left transition duration-300 ease-in-out transform hover:shadow-xl hover:-translate-y-1" data-aos="fade-up" data-aos-delay="300"> <p class="text-neutral mb-4">"As a freelancer... SecureSwap ensures I get paid once the work is approved."</p> <p class="font-semibold text-neutral-dark">- Michael B.</p> </div>
                </div>
            </div>
        </section>

        <section id="faq" class="py-16 md:py-24 overflow-hidden">
            <div class="container mx-auto px-6 max-w-4xl">
                <h2 class="text-3xl md:text-4xl font-bold text-neutral-darkest mb-12 text-center" data-aos="fade-up">Frequently Asked Questions</h2>
                <div class="space-y-6">
                    <details class="group bg-white p-6 rounded-lg shadow-sm transition duration-300 ease-in-out hover:shadow-md" data-aos="fade-up" data-aos-delay="100">
                        <summary class="flex justify-between items-center cursor-pointer font-semibold text-neutral-darkest list-none"> How does SecureSwap protect me?
                            <svg class="w-5 h-5 text-neutral transform group-open:rotate-180 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <p class="text-neutral mt-4 pt-4 border-t border-neutral-light">SecureSwap acts as a neutral third party. We hold the buyer's payment securely in escrow and only release it to the seller once the buyer confirms they have received the item or service as agreed. This protects buyers from not receiving what they paid for, and sellers from chargebacks or non-payment after delivery.</p>
                    </details>
                    <details class="group bg-white p-6 rounded-lg shadow-sm transition duration-300 ease-in-out hover:shadow-md" data-aos="fade-up" data-aos-delay="150">
                        <summary class="flex justify-between items-center cursor-pointer font-semibold text-neutral-darkest list-none">
                            What fees does SecureSwap charge?
                            <svg class="w-5 h-5 text-neutral transform group-open:rotate-180 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <p class="text-neutral mt-4 pt-4 border-t border-neutral-light">We charge a small service fee per transaction to cover operational costs and payment processing. The exact fee structure will be clearly displayed when you create or accept a deal. (Note: Fee details TBD).</p>
                    </details>
                    <details class="group bg-white p-6 rounded-lg shadow-sm transition duration-300 ease-in-out hover:shadow-md" data-aos="fade-up" data-aos-delay="200">
                        <summary class="flex justify-between items-center cursor-pointer font-semibold text-neutral-darkest list-none">
                            What types of transactions can I use SecureSwap for?
                             <svg class="w-5 h-5 text-neutral transform group-open:rotate-180 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <p class="text-neutral mt-4 pt-4 border-t border-neutral-light">SecureSwap is designed for a wide range of P2P transactions, including physical goods, digital items, services, tickets, vouchers, and more. As long as both parties agree to the terms, you can use SecureSwap.</p>
                    </details>
                     <details class="group bg-white p-6 rounded-lg shadow-sm transition duration-300 ease-in-out hover:shadow-md" data-aos="fade-up" data-aos-delay="250">
                        <summary class="flex justify-between items-center cursor-pointer font-semibold text-neutral-darkest list-none">
                            What happens if there's a dispute?
                            <svg class="w-5 h-5 text-neutral transform group-open:rotate-180 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <p class="text-neutral mt-4 pt-4 border-t border-neutral-light">While our goal is to prevent disputes, if one arises, both parties can communicate through the platform. SecureSwap provides a basic dispute resolution process where we may review evidence provided by both sides to help reach a fair outcome according to our terms of service. (Note: MVP dispute resolution might be limited).</p>
                    </details>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-neutral-darkest text-neutral-light mt-16">
         <div class="container mx-auto px-6 py-12"> <div class="grid grid-cols-1 md:grid-cols-4 gap-8"> <div> <h3 class="text-xl font-bold text-white mb-4">SecureSwap</h3> <p class="text-neutral-light mb-4">Making P2P transactions safe...</p> </div> <div> <h4 class="text-lg font-semibold text-white mb-4">Quick Links</h4> <ul class="space-y-2"> <li><a href="#process" class="text-neutral-light hover:text-white">How it Works</a></li> <li><a href="signup.html" class="text-neutral-light hover:text-white">Create Deal</a></li> <li><a href="login.html" class="text-neutral-light hover:text-white">Login</a></li> <li><a href="#faq" class="text-neutral-light hover:text-white">FAQ</a></li> </ul> </div> <div> <h4 class="text-lg font-semibold text-white mb-4">Legal</h4> <ul class="space-y-2"> <li><a href="privacy.html" class="text-neutral-light hover:text-white">Privacy Policy</a></li> <li><a href="terms.html" class="text-neutral-light hover:text-white">Terms of Service</a></li> <li><a href="refund.html" class="text-neutral-light hover:text-white">Cancellation & Refund</a></li> </ul> </div> <div> <h4 class="text-lg font-semibold text-white mb-4">Contact Us</h4> <ul class="space-y-2"> <li><a href="contact.html" class="text-neutral-light hover:text-white">Contact Form</a></li> <li><span class="text-neutral-light">support@secureswap.in</span></li> </ul> </div> </div> <div class="mt-8 pt-8 border-t border-neutral-dark text-center text-neutral"> &copy; <span id="current-year"></span> SecureSwap. All rights reserved. </div> </div>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module">
        // Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { firebaseConfig } from './js/firebase-config.js'; // Ensure this path is correct and file has config

        // Initialize Firebase
        let app, auth, db, currentUser = null;
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase Initialized for Landing Page Header");
        } catch (error) { console.error("Firebase initialization failed:", error); }

        // --- DOM Elements ---
        let authLinks, userInfoHeader, userNameHeader, logoutButtonHeader,
            mobileAuthLinks, mobileUserInfo, mobileUserName, mobileLogoutButton,
            menuButton, mobileMenu,
            createDealLink; // Added createDealLink

        // --- Helper Function to Fetch User Name ---
        async function fetchUserName(uid) {
            if (!db) { console.error("Firestore not initialized for fetchUserName"); return null; }
            try {
                const userDocRef = doc(db, "users", uid);
                const userDocSnap = await getDoc(userDocRef);
                return userDocSnap.exists() ? (userDocSnap.data().name || null) : null;
            } catch (error) { console.error("Error fetching user name:", error); return null; }
        }

        // --- Helper Function for Logout ---
        async function handleLogout() {
            console.log("Logout clicked"); if (!auth) { console.error("Auth not initialized for logout"); return; }
            try { await signOut(auth); console.log("Sign out successful"); }
            catch (error) { console.error("Sign out failed:", error); alert("Failed to sign out."); }
        }

         // --- Assign elements and run listeners ---
         document.addEventListener('DOMContentLoaded', () => {
             console.log("Index Page DOM Loaded");
             // Assign Header Elements
             authLinks = document.getElementById('auth-links');
             userInfoHeader = document.getElementById('user-info-header');
             userNameHeader = document.getElementById('user-name-header');
             logoutButtonHeader = document.getElementById('logout-button-header');
             // Assign Mobile Menu Elements
             menuButton = document.getElementById('mobile-menu-button');
             mobileMenu = document.getElementById('mobile-menu');
             mobileAuthLinks = document.getElementById('mobile-auth-links');
             mobileUserInfo = document.getElementById('mobile-user-info');
             mobileUserName = document.getElementById('mobile-user-name');
             mobileLogoutButton = document.getElementById('mobile-logout-button');
             // Assign Create Deal Link Element
             createDealLink = document.getElementById('create-deal-link');

             // Mobile Menu Toggle Listener
             if(menuButton && mobileMenu) { menuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden')); }
             else { console.warn("Mobile menu elements not found"); }

             // Set Current Year
             const currentYearElement = document.getElementById('current-year');
             if(currentYearElement) { currentYearElement.textContent = new Date().getFullYear(); }

             // Initialize AOS
             if (typeof AOS !== 'undefined') { AOS.init({ duration: 800, easing: 'ease-in-out', once: true, mirror: false, anchorPlacement: 'top-bottom' }); console.log("AOS Initialized"); }
             else { console.warn("AOS library not loaded."); }

             // Initial Auth State Check after assigning elements
             if (auth) { onAuthStateChanged(auth, authStateHandler); }
             else { authStateHandler(null); } // Show logged-out state if auth failed
         });

         // --- Auth State Handler (Explicit Display Control) ---
         const authStateHandler = async (user) => {
             // Ensure header elements are available
             if (!authLinks || !userInfoHeader || !userNameHeader || !logoutButtonHeader || !mobileAuthLinks || !mobileUserInfo || !mobileUserName || !mobileLogoutButton || !createDealLink) {
                  console.warn("Header/Deal Link elements not ready yet in authStateHandler, retrying assignment...");
                  // Re-assign just in case DOMContentLoaded hasn't fully completed before first auth check
                  authLinks = document.getElementById('auth-links');
                  userInfoHeader = document.getElementById('user-info-header');
                  userNameHeader = document.getElementById('user-name-header');
                  logoutButtonHeader = document.getElementById('logout-button-header');
                  mobileAuthLinks = document.getElementById('mobile-auth-links');
                  mobileUserInfo = document.getElementById('mobile-user-info');
                  mobileUserName = document.getElementById('mobile-user-name');
                  mobileLogoutButton = document.getElementById('mobile-logout-button');
                  createDealLink = document.getElementById('create-deal-link');
                  // If still missing, log error and exit
                  if (!authLinks || !userInfoHeader || !userNameHeader || !logoutButtonHeader || !mobileAuthLinks || !mobileUserInfo || !mobileUserName || !mobileLogoutButton || !createDealLink) {
                       console.error("Header/Deal Link elements critical error! Cannot update UI."); return;
                  }
             }

             if (user) { // User is Logged IN
                 currentUser = { uid: user.uid, email: user.email };
                 console.log("User logged in, updating header:", user.uid);
                 const userName = await fetchUserName(user.uid);

                 // Update Desktop Header
                 userNameHeader.textContent = userName || user.email; // Fallback to email
                 authLinks.style.display = 'none'; // Explicitly hide
                 userInfoHeader.style.display = 'flex'; // Explicitly show as flex
                 logoutButtonHeader.removeEventListener('click', handleLogout); // Prevent duplicate listeners
                 logoutButtonHeader.addEventListener('click', handleLogout);

                 // Update Mobile Header
                 mobileUserName.textContent = userName || user.email;
                 mobileAuthLinks.style.display = 'none'; // Explicitly hide
                 mobileUserInfo.style.display = 'block'; // Explicitly show
                 mobileLogoutButton.removeEventListener('click', handleLogout); // Prevent duplicate listeners
                 mobileLogoutButton.addEventListener('click', handleLogout);

                 // Update Create Deal Link
                 createDealLink.href = 'create-deal.html';
                 console.log("User logged in, Create Deal link updated to create-deal.html");

             } else { // User is Logged OUT
                 currentUser = null;
                 console.log("User signed out, updating header.");
                 // Update Desktop Header
                 authLinks.style.display = 'flex'; // Explicitly show as flex
                 userInfoHeader.style.display = 'none'; // Explicitly hide
                 // Update Mobile Header
                 mobileAuthLinks.style.display = 'block'; // Explicitly show
                 mobileUserInfo.style.display = 'none'; // Explicitly hide

                 // Update Create Deal Link
                 createDealLink.href = 'signup.html'; // Point to signup when logged out
                 console.log("User logged out, Create Deal link updated to signup.html");
             }
         };

    </script>
    <script src="js/main.js"></script>
</body>
</html>
